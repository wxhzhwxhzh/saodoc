---
id: intro1
permalink: /js/intro1
title: 'ğŸ”µ é¼ æ ‡è½¨è¿¹ä»£ç '
---
ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„JavaScriptè‡ªæ‰§è¡Œè„šæœ¬ï¼Œå¯ä»¥æ˜¾ç¤ºé¼ æ ‡ç§»åŠ¨è½¨è¿¹å’Œç‚¹å‡»æ•ˆæœï¼š

```javascript
(function() {
    // åˆ›å»ºcanvaså…ƒç´ ç”¨äºç»˜åˆ¶è½¨è¿¹
    const canvas = document.createElement('canvas');
    canvas.id = 'mouse-trail-canvas';
    canvas.style.position = 'fixed';
    canvas.style.top = '0';
    canvas.style.left = '0';
    canvas.style.pointerEvents = 'none'; // ç¡®ä¿ä¸å½±å“é¡µé¢äº¤äº’
    canvas.style.zIndex = '9999';
    document.body.appendChild(canvas);

    const ctx = canvas.getContext('2d');
    
    // è®¾ç½®canvaså¤§å°ä¸ºçª—å£å¤§å°
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // é¼ æ ‡è½¨è¿¹ç‚¹æ•°ç»„
    const trailPoints = [];
    const MAX_TRAIL_POINTS = 50; // æœ€å¤§è½¨è¿¹ç‚¹æ•°é‡
    const TRAIL_LIFE = 1000; // è½¨è¿¹ç‚¹ç”Ÿå‘½å‘¨æœŸï¼ˆæ¯«ç§’ï¼‰

    // ç‚¹å‡»æ•ˆæœæ•°ç»„
    const clickEffects = [];

    // é¼ æ ‡ç§»åŠ¨äº‹ä»¶å¤„ç†
    document.addEventListener('mousemove', function(e) {
        // æ·»åŠ æ–°çš„è½¨è¿¹ç‚¹
        trailPoints.push({
            x: e.clientX,
            y: e.clientY,
            time: Date.now()
        });
        
        // é™åˆ¶è½¨è¿¹ç‚¹æ•°é‡
        if (trailPoints.length > MAX_TRAIL_POINTS) {
            trailPoints.shift();
        }
    });

    // é¼ æ ‡ç‚¹å‡»äº‹ä»¶å¤„ç†
    document.addEventListener('click', function(e) {
        // æ·»åŠ ç‚¹å‡»æ•ˆæœ
        clickEffects.push({
            x: e.clientX,
            y: e.clientY,
            size: 0,
            maxSize: 30,
            opacity: 1,
            color: getRandomColor()
        });
    });

    // ç”Ÿæˆéšæœºé¢œè‰²
    function getRandomColor() {
        const colors = [
            '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', 
            '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F'
        ];
        return colors[Math.floor(Math.random() * colors.length)];
    }

    // æ¸…ç†è¿‡æœŸçš„è½¨è¿¹ç‚¹
    function cleanupTrailPoints() {
        const currentTime = Date.now();
        while (trailPoints.length > 0 && 
               currentTime - trailPoints[0].time > TRAIL_LIFE) {
            trailPoints.shift();
        }
    }

    // ç»˜åˆ¶è½¨è¿¹
    function drawTrail() {
        // æ¸…é™¤ç”»å¸ƒ
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // æ¸…ç†è¿‡æœŸç‚¹
        cleanupTrailPoints();
        
        if (trailPoints.length < 2) return;
        
        // ç»˜åˆ¶è½¨è¿¹çº¿
        ctx.beginPath();
        ctx.moveTo(trailPoints[0].x, trailPoints[0].y);
        
        for (let i = 1; i < trailPoints.length; i++) {
            const point = trailPoints[i];
            const alpha = Math.min(1, (point.time - trailPoints[0].time) / TRAIL_LIFE);
            ctx.lineTo(point.x, point.y);
        }
        
        // è®¾ç½®æ¸å˜æ•ˆæœ
        const gradient = ctx.createLinearGradient(
            trailPoints[0].x, trailPoints[0].y,
            trailPoints[trailPoints.length - 1].x, trailPoints[trailPoints.length - 1].y
        );
        gradient.addColorStop(0, 'rgba(255, 107, 107, 0.1)');
        gradient.addColorStop(1, 'rgba(255, 107, 107, 0.8)');
        
        ctx.strokeStyle = gradient;
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.stroke();
        
        // ç»˜åˆ¶è½¨è¿¹ç‚¹ï¼ˆå¯é€‰ï¼Œè®©è½¨è¿¹æ›´æ˜æ˜¾ï¼‰
        for (let i = 0; i < trailPoints.length; i++) {
            const point = trailPoints[i];
            const progress = i / (trailPoints.length - 1);
            const alpha = 0.3 + progress * 0.7;
            const radius = 1 + progress * 3;
            
            ctx.beginPath();
            ctx.arc(point.x, point.y, radius, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(255, 107, 107, ${alpha})`;
            ctx.fill();
        }
    }

    // ç»˜åˆ¶ç‚¹å‡»æ•ˆæœ
    function drawClickEffects() {
        for (let i = clickEffects.length - 1; i >= 0; i--) {
            const effect = clickEffects[i];
            
            // æ›´æ–°ç‚¹å‡»æ•ˆæœ
            effect.size += 2;
            effect.opacity -= 0.02;
            
            if (effect.opacity <= 0) {
                clickEffects.splice(i, 1);
                continue;
            }
            
            // ç»˜åˆ¶ç‚¹å‡»åœ†åœˆ
            ctx.beginPath();
            ctx.arc(effect.x, effect.y, effect.size, 0, Math.PI * 2);
            ctx.strokeStyle = effect.color;
            ctx.lineWidth = 2;
            ctx.globalAlpha = effect.opacity;
            ctx.stroke();
            ctx.globalAlpha = 1;
        }
    }

    // ä¸»æ¸²æŸ“å¾ªç¯
    function animate() {
        drawTrail();
        drawClickEffects();
        requestAnimationFrame(animate);
    }

    // å¼€å§‹åŠ¨ç”»
    animate();

    // æä¾›ç§»é™¤åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
    window.removeMouseTrail = function() {
        if (canvas.parentNode) {
            canvas.parentNode.removeChild(canvas);
        }
        // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
        document.removeEventListener('mousemove', arguments.callee);
        document.removeEventListener('click', arguments.callee);
    };

})();
```

è¿™ä¸ªè„šæœ¬çš„ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼š

## åŠŸèƒ½ç‰¹ç‚¹ï¼š

1. **é¼ æ ‡è½¨è¿¹æ˜¾ç¤º**ï¼š
   - ä½¿ç”¨canvasç»˜åˆ¶å¹³æ»‘çš„è½¨è¿¹çº¿
   - è½¨è¿¹å¸¦æœ‰æ¸å˜é€æ˜æ•ˆæœ
   - è½¨è¿¹ç‚¹ä¼šéšæ—¶é—´é€æ¸æ¶ˆå¤±

2. **ç‚¹å‡»æ•ˆæœ**ï¼š
   - ç‚¹å‡»æ—¶æ˜¾ç¤ºå½©è‰²åœ†åœˆåŠ¨ç”»
   - åœ†åœˆä¼šé€æ¸æ‰©å¤§å¹¶æ·¡å‡º
   - ä½¿ç”¨å¤šç§éšæœºé¢œè‰²

3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - é™åˆ¶è½¨è¿¹ç‚¹æ•°é‡ï¼ˆæœ€å¤š50ä¸ªï¼‰
   - è‡ªåŠ¨æ¸…ç†è¿‡æœŸçš„è½¨è¿¹ç‚¹
   - ä½¿ç”¨`requestAnimationFrame`è¿›è¡Œé«˜æ•ˆæ¸²æŸ“

4. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - canvasè®¾ç½®ä¸º`pointer-events: none`ï¼Œä¸å½±å“é¡µé¢æ­£å¸¸äº¤äº’
   - è‡ªåŠ¨é€‚åº”çª—å£å¤§å°å˜åŒ–
   - è½¨è¿¹å’Œç‚¹å‡»æ•ˆæœéƒ½æœ‰åˆé€‚çš„é€æ˜åº¦ï¼Œä¸ä¼šé®æŒ¡é¡µé¢å†…å®¹

## ä½¿ç”¨æ–¹æ³•ï¼š

ç›´æ¥å°†è¿™æ®µä»£ç å¤åˆ¶åˆ°æµè§ˆå™¨æ§åˆ¶å°ä¸­æ‰§è¡Œï¼Œæˆ–è€…ä¿å­˜ä¸º.jsæ–‡ä»¶åœ¨ç½‘é¡µä¸­å¼•ç”¨å³å¯ã€‚

## å¯é€‰åŠŸèƒ½ï¼š

è„šæœ¬è¿˜æä¾›äº†ä¸€ä¸ª`removeMouseTrail()`å‡½æ•°ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°ä¸­è°ƒç”¨å®ƒæ¥ç§»é™¤è½¨è¿¹æ•ˆæœï¼š

```javascript
removeMouseTrail();
```

ä½ å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š
- `MAX_TRAIL_POINTS`ï¼šè½¨è¿¹ç‚¹çš„æœ€å¤§æ•°é‡
- `TRAIL_LIFE`ï¼šè½¨è¿¹ç‚¹çš„æ˜¾ç¤ºæ—¶é—´
- é¢œè‰²æ•°ç»„ï¼šä¿®æ”¹`getRandomColor()`å‡½æ•°ä¸­çš„é¢œè‰²å€¼
- ç‚¹å‡»æ•ˆæœçš„å¤§å°å’ŒåŠ¨ç”»é€Ÿåº¦